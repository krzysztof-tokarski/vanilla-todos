(()=>{"use strict";class t{constructor(t,e,n,o){this.title=t,this.description=e,this.dueDate=n,this.priority=o,this.finished=!1}}class e{constructor(t,e,n,o){this.title=t,this.description=e,this.dueDate=n,this.priority=o,this.todos=[]}}function n(t){const n=document.getElementsByClassName("form-input"),o=n[0].value,c=n[1].value,i=n[2].value,d=n[3].value,l=new e(o,c,i,d);null!=t&&(l.todos=t.todos),localStorage.setItem(o,JSON.stringify(l)),document.querySelector(".fluid-container").innerHTML="",window.location.reload()}function o(t){localStorage.removeItem(t),window.location.reload()}function c(e,i,d){const l=document.querySelector(".form");l&&l.remove();const a=document.querySelector(".fluid-container");null!=a&&(a.innerHTML=""),document.createElement("div").classList.add("new-form-container");const s=document.createElement("form");s.classList.add("form");const r=document.createElement("h3");r.textContent=e,r.classList.add("form-header"),s.appendChild(r),[{input:document.createElement("input"),label:"NAME"},{input:document.createElement("textarea"),label:"DESCRIPTION"},{input:document.createElement("input"),label:"DUE DATE"},{input:document.createElement("input"),label:"PRIORITY"}].forEach((t=>{t.input.classList.add("form-input");const e=document.createElement("label");e.textContent=t.label,s.appendChild(e),s.appendChild(t.input)}));const u=document.createElement("div");u.classList.add("form-buttons-container");const m=document.createElement("button");if(m.classList.add("form-button"),m.textContent="Confirm",m.setAttribute("type","button"),a.appendChild(s),"NEW PROJECT FORM"==e)m.addEventListener("click",(()=>n())),u.appendChild(m);else if("ADD NEW TODO"==e)r.textContent=r.textContent+` TO ${i.title.toUpperCase()}`,m.addEventListener("click",(()=>function(e){localStorage.removeItem(e.title);const n=document.getElementsByClassName("form-input"),o=n[0].value,c=n[1].value,i=n[2].value,d=n[3].value,l=new t(o,c,i,d);e.todos.push(l),localStorage.setItem(e.title,JSON.stringify(e)),document.querySelector(".fluid-container").innerHTML="",window.location.reload()}(i))),u.appendChild(m);else{const t=e.split(" ");if("EDITING"==t[0]){const e=document.getElementsByClassName("form-input"),l=e[0],a=e[1],s=e[2],r=e[3];l.value=i.title,a.value=i.description,s.value=i.dueDate,r.value=i.priority;const p=document.createElement("button");p.classList.add("form-button"),p.setAttribute("type","button");const E=document.createElement("button");E.classList.add("form-button"),E.setAttribute("type","button"),u.appendChild(m),u.appendChild(p),u.appendChild(E),"PROJECT"==t[1]?(m.addEventListener("click",(()=>function(t){localStorage.removeItem(t.title),n(t)}(i))),p.textContent="Delete project",p.addEventListener("click",(()=>o(i.title))),E.textContent="Manage Project's ToDos",E.addEventListener("click",(()=>function(t){const e=document.querySelector(".form");e&&e.remove();const n=document.querySelector(".fluid-container");null!=n&&(n.innerHTML=""),document.createElement("div").classList.add("manage-todos-form-form-container");const o=document.createElement("form");o.classList.add("form");const i=document.createElement("h3");if(i.classList.add("form-header"),i.textContent=`MANAGE TODOS FOR ${t.title.toUpperCase()}`,o.appendChild(i),null==t.todos||0===t.todos.length){const t=document.createElement("p");t.textContent="This project currently has no ToDos.",t.classList.add("no-todos"),o.appendChild(t)}else{const e=document.createElement("div");e.classList.add("todos-container"),t.todos.forEach((n=>{const o=document.createElement("button");o.textContent=n.title,n.finished&&(o.style.backgroundColor="green"),o.setAttribute("type","button"),o.addEventListener("click",(()=>function(t,e){c(`EDITING TODO ${t.title.toUpperCase()} FOR PROJECT ${e.title.toUpperCase()}`,t,e)}(n,t))),e.appendChild(o)})),o.appendChild(e)}const d=document.createElement("button");d.classList.add("form-button"),d.textContent="Add ToDo",d.addEventListener("click",(()=>c("ADD NEW TODO",t))),d.setAttribute("type","button"),o.appendChild(d),n.appendChild(o)}(i)))):"TODO"==t[1]&&(m.addEventListener("click",(()=>updateToDo(i,d))),p.textContent="Delete ToDo",p.addEventListener("click",(()=>function(t,e){const n=e.todos.filter((e=>e!=t));e.todos=n,o(e.title),localStorage.setItem(e.title,JSON.stringify(e)),window.location.reload()}(i,d))),E.textContent="Change status",E.addEventListener("click",(()=>function(t,e){const n=e.todos.indexOf(t);t.finished=!t.finished,e.todos[n]=t,o(e.title),localStorage.setItem(e.title,JSON.stringify(e)),window.location.reload()}(i,d))))}}s.appendChild(u)}const i=document.querySelector("main");!function(){const t=function(){let t=[],e=Object.keys(localStorage);return e.length,e.forEach((e=>{t.push(localStorage.getItem(e))})),t}();0==t.length?function(){const t=document.createElement("p");t.textContent="You currently have no projects. Try adding a new one right now!",i.appendChild(t)}():function(t){!function(t){const e=document.createElement("div");e.classList.add("projects-list-container"),i.appendChild(e),function(){const t=document.createElement("h2");t.textContent="YOUR PROJECTS",t.classList.add("projects-list-header"),document.querySelector(".projects-list-container").appendChild(t)}();const n=document.createElement("ul");n.classList.add("projects-list"),t.forEach((t=>{const e=JSON.parse(t),o=document.createElement("button");o.textContent=e.title,o.classList.add("projects-list-item"),o.addEventListener("click",(()=>function(t){c(`EDITING PROJECT ${t.title.toUpperCase()} `,t)}(e))),n.appendChild(o)})),e.appendChild(n)}(t)}(t),function(){const t=document.createElement("div");t.classList.add("buttons-container");const e=document.createElement("button");e.textContent="ADD PROJECT",e.classList.add("main-button"),e.addEventListener("click",(()=>c("NEW PROJECT FORM"))),t.appendChild(e),i.appendChild(t)}(),function(){const t=document.createElement("div");t.classList.add("fluid-container"),i.appendChild(t)}()}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixHQXRCZmlCLENBQWtCakIsR0EyRG5CLFdBQ0gsTUFBTXJDLEVBQW1CckMsU0FBUzJCLGNBQWMsT0FDaERVLEVBQWlCVCxVQUFVQyxJQUFJLHFCQUMvQixNQUFNK0QsRUFBbUI1RixTQUFTMkIsY0FBYyxVQUNoRGlFLEVBQWlCNUQsWUFBYyxjQUMvQjRELEVBQWlCaEUsVUFBVUMsSUFBSSxlQUMvQitELEVBQWlCcEQsaUJBQWlCLFNBQVEsSUFBTW5CLEVBQWMsc0JBQzlEZ0IsRUFBaUJKLFlBQVkyRCxHQUM3Qm5CLEVBQUt4QyxZQUFZSSxHQVhqQndELEdBYUcsV0FDSCxNQUFNbkUsRUFBaUIxQixTQUFTMkIsY0FBYyxPQUM5Q0QsRUFBZUUsVUFBVUMsSUFBSSxtQkFDN0I0QyxFQUFLeEMsWUFBWVAsR0FmakJvRSxHRWxFSkMsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZhbmlsbGEtdG9kb3MvLi9zcmMvYXBwL21vZGVscy9tb2RlbHMtbW9kdWxlLmpzIiwid2VicGFjazovL3ZhbmlsbGEtdG9kb3MvLi9zcmMvYXBwL3Byb2plY3QvY3JlYXRlLW5ldy1wcm9qZWN0L2NyZWF0ZS1uZXctcHJvamVjdC5qcyIsIndlYnBhY2s6Ly92YW5pbGxhLXRvZG9zLy4vc3JjL2FwcC9wcm9qZWN0L3Byb2plY3QtZWRpdGlvbi13aW5kb3cvZGVsZXRlLXByb2plY3QuanMiLCJ3ZWJwYWNrOi8vdmFuaWxsYS10b2Rvcy8uL3NyYy9hcHAvc2hhcmVkL2NyZWF0ZS1uZXctZm9ybS5qcyIsIndlYnBhY2s6Ly92YW5pbGxhLXRvZG9zLy4vc3JjL2FwcC90b2RvL2NyZWF0ZS10by1kby5qcyIsIndlYnBhY2s6Ly92YW5pbGxhLXRvZG9zLy4vc3JjL2FwcC9wcm9qZWN0L3Byb2plY3QtZWRpdGlvbi13aW5kb3cvdXBkYXRlLXByb2plY3QuanMiLCJ3ZWJwYWNrOi8vdmFuaWxsYS10b2Rvcy8uL3NyYy9hcHAvdG9kby9tYW5hZ2UtdG9kb3MuanMiLCJ3ZWJwYWNrOi8vdmFuaWxsYS10b2Rvcy8uL3NyYy9hcHAvdG9kby9lZGl0LXRvZG8uanMiLCJ3ZWJwYWNrOi8vdmFuaWxsYS10b2Rvcy8uL3NyYy9hcHAvdG9kby9kZWxldGUtdG8tZG8uanMiLCJ3ZWJwYWNrOi8vdmFuaWxsYS10b2Rvcy8uL3NyYy9hcHAvdG9kby9jaGFuZ2UtdG8tZG8tc3RhdHVzLmpzIiwid2VicGFjazovL3ZhbmlsbGEtdG9kb3MvLi9zcmMvYXBwL3N0YXJ0LXVwLmpzIiwid2VicGFjazovL3ZhbmlsbGEtdG9kb3MvLi9zcmMvYXBwL3Byb2plY3QvcHJvamVjdC1lZGl0aW9uLXdpbmRvdy9wcm9qZWN0LWVkaXRpb24td2luZG93LmpzIiwid2VicGFjazovL3ZhbmlsbGEtdG9kb3MvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFRvRG9DbGFzcyB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSkge1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgdGhpcy5maW5pc2hlZCA9ICBmYWxzZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQcm9qZWN0Q2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpIHtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIHRoaXMudG9kb3MgPSBbXTtcbiAgICB9XG59XG5cbiIsImltcG9ydCB7IFByb2plY3RDbGFzcyB9IGZyb20gXCIuLi8uLi9tb2RlbHMvbW9kZWxzLW1vZHVsZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTmV3UHJvamVjdChwcm9qZWN0KSB7XG5cbiAgICBjb25zdCBmb3JtSW5wdXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZm9ybS1pbnB1dCcpO1xuICAgIGNvbnN0IG5ld1Byb2plY3RUaXRsZSA9IGZvcm1JbnB1dHNbMF0udmFsdWU7XG4gICAgY29uc3QgbmV3UHJvamVjdERlc2NyaXB0aW9uID0gZm9ybUlucHV0c1sxXS52YWx1ZTtcbiAgICBjb25zdCBuZXdQcm9qZWN0RHVlRGF0ZSA9IGZvcm1JbnB1dHNbMl0udmFsdWU7XG4gICAgY29uc3QgbmV3UHJvamVjdFByaW9yaXR5ID0gZm9ybUlucHV0c1szXS52YWx1ZTtcbiAgXG4gICAgY29uc3QgbmV3UHJvamVjdCA9IG5ldyBQcm9qZWN0Q2xhc3MobmV3UHJvamVjdFRpdGxlLCBuZXdQcm9qZWN0RGVzY3JpcHRpb24sbmV3UHJvamVjdER1ZURhdGUsIG5ld1Byb2plY3RQcmlvcml0eSk7XG5cbiAgICBpZiAocHJvamVjdCAhPSB1bmRlZmluZWQpIHtcbiAgICAgIG5ld1Byb2plY3QudG9kb3MgPSBwcm9qZWN0LnRvZG9zO1xuICAgIH1cbiAgXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obmV3UHJvamVjdFRpdGxlLCBKU09OLnN0cmluZ2lmeShuZXdQcm9qZWN0KSk7XG4gIFxuICAgIGNvbnN0IGZsdWlkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZsdWlkLWNvbnRhaW5lcicpO1xuICAgIGZsdWlkQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbn0iLCJleHBvcnQgZnVuY3Rpb24gZGVsZXRlUHJvamVjdChwcm9qZWN0VGl0bGUpIHtcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0ocHJvamVjdFRpdGxlKTtcbiAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xufSIsImltcG9ydCB7Y3JlYXRlTmV3UHJvamVjdH0gZnJvbSAnLi4vcHJvamVjdC9jcmVhdGUtbmV3LXByb2plY3QvY3JlYXRlLW5ldy1wcm9qZWN0JztcbmltcG9ydCB7ZGVsZXRlUHJvamVjdH0gZnJvbSAnLi4vcHJvamVjdC9wcm9qZWN0LWVkaXRpb24td2luZG93L2RlbGV0ZS1wcm9qZWN0JztcbmltcG9ydCB7dXBkYXRlUHJvamVjdH0gZnJvbSAnLi4vcHJvamVjdC9wcm9qZWN0LWVkaXRpb24td2luZG93L3VwZGF0ZS1wcm9qZWN0JztcbmltcG9ydCB7b3Blbk1hbmFnZVRvZG9zV2luZG93fSBmcm9tICcuLi90b2RvL21hbmFnZS10b2Rvcyc7XG5pbXBvcnQgeyBjcmVhdGVUb0RvIH0gZnJvbSAnLi4vdG9kby9jcmVhdGUtdG8tZG8nO1xuaW1wb3J0IHsgZGVsZXRlVG9EbyB9IGZyb20gJy4uL3RvZG8vZGVsZXRlLXRvLWRvJztcbmltcG9ydCB7Y2hhbmdlVG9Eb1N0YXR1c30gZnJvbSAnLi4vdG9kby9jaGFuZ2UtdG8tZG8tc3RhdHVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5ld0Zvcm0ocHNldWRvRW51bSwgcHJvamVjdCwgdG9kbykge1xuICAgIFxuICAgIGNvbnN0IGV4aXN0aW5nRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG5cbiAgICBpZiAoZXhpc3RpbmdGb3JtKSB7XG4gICAgICAgIGV4aXN0aW5nRm9ybS5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBmbHVpZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mbHVpZC1jb250YWluZXInKTtcbiAgICBpZiAoZmx1aWRDb250YWluZXIgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZsdWlkQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIH1cblxuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBmb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ25ldy1mb3JtLWNvbnRhaW5lcicpO1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gICAgZm9ybS5jbGFzc0xpc3QuYWRkKCdmb3JtJyk7XG4gICAgY29uc3QgaDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgIGgzLnRleHRDb250ZW50ID0gcHNldWRvRW51bTtcbiAgICBoMy5jbGFzc0xpc3QuYWRkKCdmb3JtLWhlYWRlcicpO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQoaDMpO1xuICAgIGNvbnN0IHRpdGxlRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIGNvbnN0IGR1ZURhdGVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgY29uc3QgcHJpb3JpdHlGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cbiAgICBjb25zdCBpbnB1dHMgPSBbXG4gICAgICAgIHtpbnB1dDogdGl0bGVGaWVsZCwgbGFiZWw6IFwiTkFNRVwifSxcbiAgICAgICAge2lucHV0OiBkZXNjcmlwdGlvbkZpZWxkLCBsYWJlbDogXCJERVNDUklQVElPTlwifSxcbiAgICAgICAge2lucHV0OiBkdWVEYXRlRmllbGQsIGxhYmVsOiBcIkRVRSBEQVRFXCJ9LFxuICAgICAgICB7aW5wdXQ6IHByaW9yaXR5RmllbGQsIGxhYmVsOiBcIlBSSU9SSVRZXCJ9XTtcblxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgaW5wdXQuaW5wdXQuY2xhc3NMaXN0LmFkZCgnZm9ybS1pbnB1dCcpO1xuICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gaW5wdXQubGFiZWw7XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGlucHV0LmlucHV0KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBidXR0b25zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tYnV0dG9ucy1jb250YWluZXInKTtcblxuICAgIGNvbnN0IHByaW1hcnlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBwcmltYXJ5QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tYnV0dG9uJyk7XG4gICAgcHJpbWFyeUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ29uZmlybVwiO1xuICAgIHByaW1hcnlCdXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuXG4gICAgZmx1aWRDb250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cblxuICAgIGlmIChwc2V1ZG9FbnVtID09IFwiTkVXIFBST0pFQ1QgRk9STVwiKSB7XG4gICAgICAgIHByaW1hcnlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpID0+IGNyZWF0ZU5ld1Byb2plY3QoKSk7XG4gICAgICAgIGJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQocHJpbWFyeUJ1dHRvbik7XG4gICAgfSBlbHNlIGlmIChwc2V1ZG9FbnVtID09IFwiQUREIE5FVyBUT0RPXCIpIHtcbiAgICAgICAgaDMudGV4dENvbnRlbnQgPSBoMy50ZXh0Q29udGVudCArIGAgVE8gJHtwcm9qZWN0LnRpdGxlLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgICAgcHJpbWFyeUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCkgPT4gY3JlYXRlVG9Ebyhwcm9qZWN0KSk7XG4gICAgICAgIGJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQocHJpbWFyeUJ1dHRvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3BsaXQgPSBwc2V1ZG9FbnVtLnNwbGl0KCcgJyk7XG4gICAgICAgIGlmIChzcGxpdFswXSA9PSBcIkVESVRJTkdcIikge1xuXG4gICAgICAgICAgICBjb25zdCBmb3JtSW5wdXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZm9ybS1pbnB1dCcpO1xuICAgICAgICAgICAgY29uc3QgdGl0bGVJbnB1dCA9IGZvcm1JbnB1dHNbMF07XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbklucHV0ID0gZm9ybUlucHV0c1sxXTtcbiAgICAgICAgICAgIGNvbnN0IGR1ZURhdGVJbnB1dCA9IGZvcm1JbnB1dHNbMl07XG4gICAgICAgICAgICBjb25zdCBwcmlvcml0eUlucHV0ID0gZm9ybUlucHV0c1szXTtcblxuICAgICAgICAgICAgdGl0bGVJbnB1dC52YWx1ZSA9IHByb2plY3QudGl0bGU7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvamVjdC5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIGR1ZURhdGVJbnB1dC52YWx1ZSA9IHByb2plY3QuZHVlRGF0ZTtcbiAgICAgICAgICAgIHByaW9yaXR5SW5wdXQudmFsdWUgPSBwcm9qZWN0LnByaW9yaXR5O1xuXG4gICAgICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnZm9ybS1idXR0b24nKTtcbiAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1hbmFnZVRvZG9zQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBtYW5hZ2VUb2Rvc0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdmb3JtLWJ1dHRvbicpO1xuICAgICAgICAgICAgbWFuYWdlVG9kb3NCdXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuXG4gICAgICAgICAgICBidXR0b25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHByaW1hcnlCdXR0b24pO1xuICAgICAgICAgICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xuICAgICAgICAgICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChtYW5hZ2VUb2Rvc0J1dHRvbik7XG5cbiAgICAgICAgICAgIGlmIChzcGxpdFsxXSA9PSBcIlBST0pFQ1RcIikge1xuICAgICAgICAgICAgICAgIHByaW1hcnlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpID0+IHVwZGF0ZVByb2plY3QocHJvamVjdCkpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdEZWxldGUgcHJvamVjdCc7XG4gICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKSA9PiBkZWxldGVQcm9qZWN0KHByb2plY3QudGl0bGUpKTtcbiAgICAgICAgICAgICAgICBtYW5hZ2VUb2Rvc0J1dHRvbi50ZXh0Q29udGVudCA9IFwiTWFuYWdlIFByb2plY3QncyBUb0Rvc1wiO1xuICAgICAgICAgICAgICAgIG1hbmFnZVRvZG9zQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gb3Blbk1hbmFnZVRvZG9zV2luZG93KHByb2plY3QpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3BsaXRbMV0gPT0gXCJUT0RPXCIpIHtcbiAgICAgICAgICAgICAgICBwcmltYXJ5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKSA9PiB1cGRhdGVUb0RvKHByb2plY3QsIHRvZG8pKTtcbiAgICAgICAgICAgICAgICBkZWxldGVCdXR0b24udGV4dENvbnRlbnQgPSAnRGVsZXRlIFRvRG8nO1xuICAgICAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCkgPT4gZGVsZXRlVG9Ebyhwcm9qZWN0LCB0b2RvKSk7XG4gICAgICAgICAgICAgICAgbWFuYWdlVG9kb3NCdXR0b24udGV4dENvbnRlbnQgPSBcIkNoYW5nZSBzdGF0dXNcIjtcbiAgICAgICAgICAgICAgICBtYW5hZ2VUb2Rvc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNoYW5nZVRvRG9TdGF0dXMocHJvamVjdCwgdG9kbykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIH1cbiAgICBmb3JtLmFwcGVuZENoaWxkKGJ1dHRvbnNDb250YWluZXIpO1xuXG59IiwiaW1wb3J0IHsgVG9Eb0NsYXNzIH0gZnJvbSBcIi4uL21vZGVscy9tb2RlbHMtbW9kdWxlXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUb0RvKHByb2plY3QpIHtcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0ocHJvamVjdC50aXRsZSk7XG5cbiAgY29uc3QgZm9ybUlucHV0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Zvcm0taW5wdXQnKTtcbiAgY29uc3QgbmV3VG9Eb1RpdGxlID0gZm9ybUlucHV0c1swXS52YWx1ZTtcbiAgY29uc3QgbmV3VG9Eb0Rlc2NyaXB0aW9uID0gZm9ybUlucHV0c1sxXS52YWx1ZTtcbiAgY29uc3QgbmV3VG9Eb0R1ZURhdGUgPSBmb3JtSW5wdXRzWzJdLnZhbHVlO1xuICBjb25zdCBuZXdUb0RvUHJpb3JpdHkgPSBmb3JtSW5wdXRzWzNdLnZhbHVlO1xuXG4gIGNvbnN0IG5ld1RvZG8gPSBuZXcgVG9Eb0NsYXNzKG5ld1RvRG9UaXRsZSwgbmV3VG9Eb0Rlc2NyaXB0aW9uLCBuZXdUb0RvRHVlRGF0ZSwgbmV3VG9Eb1ByaW9yaXR5KTtcbiAgcHJvamVjdC50b2Rvcy5wdXNoKG5ld1RvZG8pO1xuXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHByb2plY3QudGl0bGUsIEpTT04uc3RyaW5naWZ5KHByb2plY3QpKTtcblxuICBjb25zdCBmbHVpZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mbHVpZC1jb250YWluZXInKTtcbiAgZmx1aWRDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbn0iLCJpbXBvcnQgeyBjcmVhdGVOZXdQcm9qZWN0IH0gZnJvbSBcIi4uL2NyZWF0ZS1uZXctcHJvamVjdC9jcmVhdGUtbmV3LXByb2plY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVByb2plY3QocHJvamVjdCkge1xuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwcm9qZWN0LnRpdGxlKTtcbiAgY3JlYXRlTmV3UHJvamVjdChwcm9qZWN0KTtcbn0iLCJpbXBvcnQgeyBjcmVhdGVOZXdGb3JtIH0gZnJvbSBcIi4uL3NoYXJlZC9jcmVhdGUtbmV3LWZvcm1cIjtcbmltcG9ydCB7IG9wZW5FZGl0VG9Eb1dpbmRvdyB9IGZyb20gXCIuL2VkaXQtdG9kb1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gb3Blbk1hbmFnZVRvZG9zV2luZG93KHByb2plY3QpIHtcblxuICBjb25zdCBleGlzdGluZ0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuXG4gIGlmIChleGlzdGluZ0Zvcm0pIHtcbiAgICAgIGV4aXN0aW5nRm9ybS5yZW1vdmUoKTtcbiAgfVxuXG4gIGNvbnN0IGZsdWlkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZsdWlkLWNvbnRhaW5lcicpO1xuICBpZiAoZmx1aWRDb250YWluZXIgIT0gdW5kZWZpbmVkKSB7XG4gICAgICBmbHVpZENvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgfVxuXG4gIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZm9ybUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtYW5hZ2UtdG9kb3MtZm9ybS1mb3JtLWNvbnRhaW5lcicpO1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICBmb3JtLmNsYXNzTGlzdC5hZGQoJ2Zvcm0nKTtcbiAgY29uc3QgaDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICBoMy5jbGFzc0xpc3QuYWRkKCdmb3JtLWhlYWRlcicpO1xuICBoMy50ZXh0Q29udGVudCA9IGBNQU5BR0UgVE9ET1MgRk9SICR7cHJvamVjdC50aXRsZS50b1VwcGVyQ2FzZSgpfWA7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoaDMpO1xuXG5cbiAgaWYgKHByb2plY3QudG9kb3MgPT0gdW5kZWZpbmVkIHx8IHByb2plY3QudG9kb3MubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBwLnRleHRDb250ZW50ID0gJ1RoaXMgcHJvamVjdCBjdXJyZW50bHkgaGFzIG5vIFRvRG9zLic7XG4gICAgcC5jbGFzc0xpc3QuYWRkKCduby10b2RvcycpO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQocCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdG9kb3NDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0b2Rvc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0b2Rvcy1jb250YWluZXInKVxuICAgIHByb2plY3QudG9kb3MuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gdG9kby50aXRsZTtcbiAgICAgIGlmICh0b2RvLmZpbmlzaGVkKSB7XG4gICAgICAgIGJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImdyZWVuXCI7XG4gICAgICB9XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBvcGVuRWRpdFRvRG9XaW5kb3codG9kbywgcHJvamVjdCkpXG4gICAgICB0b2Rvc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgIH0pO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQodG9kb3NDb250YWluZXIpO1xuICB9XG4gIGNvbnN0IGNyZWF0ZVRvRG9CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgY3JlYXRlVG9Eb0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdmb3JtLWJ1dHRvbicpO1xuICBjcmVhdGVUb0RvQnV0dG9uLnRleHRDb250ZW50ID0gJ0FkZCBUb0RvJztcbiAgY3JlYXRlVG9Eb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNyZWF0ZU5ld0Zvcm0oXCJBREQgTkVXIFRPRE9cIiwgcHJvamVjdCkpO1xuICBjcmVhdGVUb0RvQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsJ2J1dHRvbicpO1xuICBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZVRvRG9CdXR0b24pO1xuXG4gIGZsdWlkQ29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm0pXG59IiwiaW1wb3J0IHsgY3JlYXRlTmV3Rm9ybSB9IGZyb20gXCIuLi9zaGFyZWQvY3JlYXRlLW5ldy1mb3JtXCI7XG5pbXBvcnQgeyBkZWxldGVQcm9qZWN0IH0gZnJvbSBcIi4uL3Byb2plY3QvcHJvamVjdC1lZGl0aW9uLXdpbmRvdy9kZWxldGUtcHJvamVjdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gb3BlbkVkaXRUb0RvV2luZG93KHRvZG8sIHByb2plY3QpIHtcbiAgY29uc3QgcHNldWRvRW51bSA9IGBFRElUSU5HIFRPRE8gJHsodG9kby50aXRsZSkudG9VcHBlckNhc2UoKX0gRk9SIFBST0pFQ1QgJHtwcm9qZWN0LnRpdGxlLnRvVXBwZXJDYXNlKCl9YDtcbiAgY3JlYXRlTmV3Rm9ybShwc2V1ZG9FbnVtLCB0b2RvLCBwcm9qZWN0KTtcblxufSIsImltcG9ydCB7IGRlbGV0ZVByb2plY3QgfSBmcm9tIFwiLi4vcHJvamVjdC9wcm9qZWN0LWVkaXRpb24td2luZG93L2RlbGV0ZS1wcm9qZWN0XCJcblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVRvRG8odG9kbywgcHJvamVjdCkge1xuICBjb25zdCBmaWx0ZXJlZCA9IHByb2plY3QudG9kb3MuZmlsdGVyKHRvZG9JdGVtID0+IHRvZG9JdGVtICE9IHRvZG8pO1xuICBwcm9qZWN0LnRvZG9zID0gZmlsdGVyZWQ7XG4gIGRlbGV0ZVByb2plY3QocHJvamVjdC50aXRsZSk7XG5cbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0ocHJvamVjdC50aXRsZSwgSlNPTi5zdHJpbmdpZnkocHJvamVjdCkpO1xuICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG59IiwiaW1wb3J0IHsgZGVsZXRlUHJvamVjdCB9IGZyb20gXCIuLi9wcm9qZWN0L3Byb2plY3QtZWRpdGlvbi13aW5kb3cvZGVsZXRlLXByb2plY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZVRvRG9TdGF0dXModG9kbywgcHJvamVjdCkge1xuICBjb25zdCBpbmRleE9mID0gcHJvamVjdC50b2Rvcy5pbmRleE9mKHRvZG8pO1xuICB0b2RvLmZpbmlzaGVkID0gISh0b2RvLmZpbmlzaGVkKTtcbiAgcHJvamVjdC50b2Rvc1tpbmRleE9mXSA9ICB0b2RvO1xuICBkZWxldGVQcm9qZWN0KHByb2plY3QudGl0bGUpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwcm9qZWN0LnRpdGxlLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0KSk7XG4gIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbn0iLCIvLyBDT1JFO1xuZXhwb3J0IGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG5pbXBvcnQge2NyZWF0ZU5ld0Zvcm19IGZyb20gJy4vc2hhcmVkL2NyZWF0ZS1uZXctZm9ybSc7XG5pbXBvcnQgeyBjcmVhdGVQcm9qZWN0RWRpdGlvbldpbmRvdyB9IGZyb20gJy4vcHJvamVjdC9wcm9qZWN0LWVkaXRpb24td2luZG93L3Byb2plY3QtZWRpdGlvbi13aW5kb3cnO1xuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRVcCAoKSB7XG4gICAgY29uc3QgcHJvamVjdHNGcm9tU3RvcmFnZSA9IGdldFByb2plY3RzRnJvbVN0b3JhZ2UoKTtcbiAgICBcbiAgICBpZiAocHJvamVjdHNGcm9tU3RvcmFnZS5sZW5ndGggPT0gMCkge1xuICAgICAgICBhcHBlbmROb1RvZG9zTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY3JlYXRlTWFpbkNvbnRlbnQocHJvamVjdHNGcm9tU3RvcmFnZSk7XG4gICAgfTtcbiAgICBwcmVwYXJlTmVjZXNzYXJ5RWxlbWVudHMoKSBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2plY3RzRnJvbVN0b3JhZ2UoKSB7XG4gICAgbGV0IHZhbHVlcyA9IFtdLFxuICAgIGtleXMgPSBPYmplY3Qua2V5cyhsb2NhbFN0b3JhZ2UpLFxuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgdmFsdWVzLnB1c2gobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSlcbiAgICB9KTtcbiAgICByZXR1cm4gdmFsdWVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kTm9Ub2Rvc01lc3NhZ2UoKSB7XG4gICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBwLnRleHRDb250ZW50ID0gXCJZb3UgY3VycmVudGx5IGhhdmUgbm8gcHJvamVjdHMuIFRyeSBhZGRpbmcgYSBuZXcgb25lIHJpZ2h0IG5vdyFcIjtcbiAgICBtYWluLmFwcGVuZENoaWxkKHApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTWFpbkNvbnRlbnQocHJvamVjdHNGcm9tU3RvcmFnZSkge1xuICAgIGNyZWF0ZVByb2plY3RzTGlzdChwcm9qZWN0c0Zyb21TdG9yYWdlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMaXN0SGVhZGVyKCkge1xuICAgIGNvbnN0IGgyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICBoMi50ZXh0Q29udGVudCA9IFwiWU9VUiBQUk9KRUNUU1wiO1xuICAgIGgyLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RzLWxpc3QtaGVhZGVyJyk7XG4gICAgY29uc3QgbGlzdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy1saXN0LWNvbnRhaW5lcicpICAgICBcbiAgICBsaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGgyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3RzTGlzdChwcm9qZWN0c0Zyb21TdG9yYWdlKSB7XG4gICAgY29uc3QgbGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxpc3RDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncHJvamVjdHMtbGlzdC1jb250YWluZXInKTtcbiAgICBtYWluLmFwcGVuZENoaWxkKGxpc3RDb250YWluZXIpO1xuICAgIGNyZWF0ZUxpc3RIZWFkZXIoKTtcblxuICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICB1bC5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0cy1saXN0JylcbiAgICBwcm9qZWN0c0Zyb21TdG9yYWdlLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RGcm9tU3RvcmFnZSA9IEpTT04ucGFyc2UocHJvamVjdCk7XG4gICAgICAgIGNvbnN0IHByb2plY3RMaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBwcm9qZWN0TGlzdEl0ZW0udGV4dENvbnRlbnQgPSBwcm9qZWN0RnJvbVN0b3JhZ2UudGl0bGU7XG4gICAgICAgIHByb2plY3RMaXN0SXRlbS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0cy1saXN0LWl0ZW0nKTtcbiAgICAgICAgcHJvamVjdExpc3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY3JlYXRlUHJvamVjdEVkaXRpb25XaW5kb3cocHJvamVjdEZyb21TdG9yYWdlKSk7XG4gICAgICAgIHVsLmFwcGVuZENoaWxkKHByb2plY3RMaXN0SXRlbSk7XG4gICAgfSk7XG5cbiAgICBsaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcbn1cblxuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmVOZWNlc3NhcnlFbGVtZW50cygpIHtcbiAgICBjcmVhdGVCdXR0b25zQ29udGFpbmVyKCk7XG4gICAgY3JlYXRlRmx1aWRDb250YWluZXIoKVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbnNDb250YWluZXIoKSB7XG4gICAgY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJ1dHRvbnNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYnV0dG9ucy1jb250YWluZXInKTtcbiAgICBjb25zdCBhZGRQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgYWRkUHJvamVjdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQUREIFBST0pFQ1RcIjtcbiAgICBhZGRQcm9qZWN0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ21haW4tYnV0dG9uJyk7XG4gICAgYWRkUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKSA9PiBjcmVhdGVOZXdGb3JtKFwiTkVXIFBST0pFQ1QgRk9STVwiKSk7XG4gICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChhZGRQcm9qZWN0QnV0dG9uKTtcbiAgICBtYWluLmFwcGVuZENoaWxkKGJ1dHRvbnNDb250YWluZXIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZsdWlkQ29udGFpbmVyKCkge1xuICAgIGNvbnN0IGZsdWlkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZmx1aWRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZmx1aWQtY29udGFpbmVyJyk7XG4gICAgbWFpbi5hcHBlbmRDaGlsZChmbHVpZENvbnRhaW5lcik7XG59XG5cblxuXG5cblxuXG5cblxuIiwiaW1wb3J0IHtjcmVhdGVOZXdGb3JtfSBmcm9tICcuLi8uLi9zaGFyZWQvY3JlYXRlLW5ldy1mb3JtJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3RFZGl0aW9uV2luZG93KHByb2plY3Qpe1xuXG4gIGNvbnN0IHBzZXVkb0VudW0gPSBgRURJVElORyBQUk9KRUNUICR7KHByb2plY3QudGl0bGUpLnRvVXBwZXJDYXNlKCl9IGA7XG4gIGNyZWF0ZU5ld0Zvcm0ocHNldWRvRW51bSwgcHJvamVjdCk7XG5cbn1cbiIsImltcG9ydCB7IHN0YXJ0VXAgfSBmcm9tIFwiLi9hcHAvc3RhcnQtdXBcIjtcblxuc3RhcnRVcCgpOyJdLCJuYW1lcyI6WyJUb0RvQ2xhc3MiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJ0aGlzIiwiZmluaXNoZWQiLCJQcm9qZWN0Q2xhc3MiLCJ0b2RvcyIsImNyZWF0ZU5ld1Byb2plY3QiLCJwcm9qZWN0IiwiZm9ybUlucHV0cyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm5ld1Byb2plY3RUaXRsZSIsInZhbHVlIiwibmV3UHJvamVjdERlc2NyaXB0aW9uIiwibmV3UHJvamVjdER1ZURhdGUiLCJuZXdQcm9qZWN0UHJpb3JpdHkiLCJuZXdQcm9qZWN0IiwidW5kZWZpbmVkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJkZWxldGVQcm9qZWN0IiwicHJvamVjdFRpdGxlIiwicmVtb3ZlSXRlbSIsImNyZWF0ZU5ld0Zvcm0iLCJwc2V1ZG9FbnVtIiwidG9kbyIsImV4aXN0aW5nRm9ybSIsInJlbW92ZSIsImZsdWlkQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImZvcm0iLCJoMyIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJpbnB1dCIsImxhYmVsIiwiZm9yRWFjaCIsImJ1dHRvbnNDb250YWluZXIiLCJwcmltYXJ5QnV0dG9uIiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvVXBwZXJDYXNlIiwibmV3VG9Eb1RpdGxlIiwibmV3VG9Eb0Rlc2NyaXB0aW9uIiwibmV3VG9Eb0R1ZURhdGUiLCJuZXdUb0RvUHJpb3JpdHkiLCJuZXdUb2RvIiwicHVzaCIsImNyZWF0ZVRvRG8iLCJzcGxpdCIsInRpdGxlSW5wdXQiLCJkZXNjcmlwdGlvbklucHV0IiwiZHVlRGF0ZUlucHV0IiwicHJpb3JpdHlJbnB1dCIsImRlbGV0ZUJ1dHRvbiIsIm1hbmFnZVRvZG9zQnV0dG9uIiwidXBkYXRlUHJvamVjdCIsImxlbmd0aCIsInAiLCJ0b2Rvc0NvbnRhaW5lciIsImJ1dHRvbiIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwib3BlbkVkaXRUb0RvV2luZG93IiwiY3JlYXRlVG9Eb0J1dHRvbiIsIm9wZW5NYW5hZ2VUb2Rvc1dpbmRvdyIsInVwZGF0ZVRvRG8iLCJmaWx0ZXJlZCIsImZpbHRlciIsInRvZG9JdGVtIiwiZGVsZXRlVG9EbyIsImluZGV4T2YiLCJjaGFuZ2VUb0RvU3RhdHVzIiwibWFpbiIsInByb2plY3RzRnJvbVN0b3JhZ2UiLCJ2YWx1ZXMiLCJrZXlzIiwiT2JqZWN0Iiwia2V5IiwiZ2V0SXRlbSIsImdldFByb2plY3RzRnJvbVN0b3JhZ2UiLCJhcHBlbmROb1RvZG9zTWVzc2FnZSIsImxpc3RDb250YWluZXIiLCJoMiIsImNyZWF0ZUxpc3RIZWFkZXIiLCJ1bCIsInByb2plY3RGcm9tU3RvcmFnZSIsInBhcnNlIiwicHJvamVjdExpc3RJdGVtIiwiY3JlYXRlUHJvamVjdEVkaXRpb25XaW5kb3ciLCJjcmVhdGVQcm9qZWN0c0xpc3QiLCJjcmVhdGVNYWluQ29udGVudCIsImFkZFByb2plY3RCdXR0b24iLCJjcmVhdGVCdXR0b25zQ29udGFpbmVyIiwiY3JlYXRlRmx1aWRDb250YWluZXIiLCJzdGFydFVwIl0sInNvdXJjZVJvb3QiOiIifQ==